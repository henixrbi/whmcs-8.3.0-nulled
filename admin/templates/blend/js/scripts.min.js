var blendClientLimits={refs:{primary:"#clientLimitNotification",form:"#clientLimitNotification form",dismiss:"#btnClientLimitNotificationDismiss",dontshow:"#btnClientLimitNotificationDontShowAgain"},init:function(){var t=blendClientLimits;$(t.refs.form).submit(function(e){e.preventDefault(),t.go($(this))}),$(t.refs.dismiss).click(function(e){e.preventDefault(),t.dismiss("clientlimitdismiss")}),$(t.refs.dontshow).click(function(e){e.preventDefault(),t.dismiss("clientlimitdontshowagain")})},dismiss:function(e){$(this.refs.primary).fadeOut(),WHMCS.http.jqClient.post(window.location.href,e+"=1&name="+$(this.refs.primary).find(".panel-title span").html())},go:function(t){var e=t.data("fetchUrl"),a=t.find('button[type="submit"]'),i=a.html();a.css("width",a.css("width")).prop("disabled",!0).html('<i class="fas fa-spinner fa-spin"></i>'),WHMCS.http.jqClient.post(e,t.serialize(),function(e){t.find(".input-license-key").val(e.license_key),t.find(".input-member-data").val(e.member_data),t.off("submit").submit(),a.html(i).removeProp("disabled")},"json")}};$(document).ready(blendClientLimits.init);var blendGlobal={refs:{frmNotes:"#frmMyNotes",modalNotes:"#modalMyNotes"},init:function(){var t=blendGlobal;$(t.refs.frmNotes).submit(function(e){e.preventDefault(),$(t.refs.modalNotes).modal("hide"),WHMCS.http.jqClient.post($(this).attr("action"),$(this).serialize())}),$("div.modal").on("shown.bs.modal",function(){var e=jQuery(this).find("input:not(input[type=checkbox],input[type=radio],input[type=hidden]),button.btn-primary");0<e.length&&$(e).first().focus()}),lightbox.init()}};$(document).ready(blendGlobal.init);var blendIntelliSearch={activeSearch:!1,typingTimer:null,refs:{body:"body",form:"#intelliSearchForm",value:"#inputIntelliSearchValue",close:"#btnIntelliSearchClose",results:"#intelligentSearchResults",searchResults:"#intelligentSearchResults .search-results",resultheadings:"#intelligentSearchResults h5",expand:"#intelliSearchExpand",realtime:"#intelliSearchRealtime",hideinactive:"#intelliSearchHideInactiveSwitch",expandbtn:"#intelligentSearchResults .search-more-results",searchMoreTpl:'.search-more-results[data-type="placeholder"]'},init:function(){var a=blendIntelliSearch;$(a.refs.value).focus(function(e){a.inputExpand()}),$(a.refs.value).keyup(function(){a.inputKeyUp()}),$(a.refs.form+" form").submit(function(e){e.preventDefault(),a.search()}),$(document).keyup(function(e){27===e.keyCode&&a.close()}),$(a.refs.body).click(function(e){$(a.refs.form).hasClass("active")&&!$(e.target).closest(a.refs.form+","+a.refs.results).length&&a.close()}),$(a.refs.close).click(function(e){a.close()}),$(a.refs.realtime).bootstrapSwitch().on("switchChange.bootstrapSwitch",function(e,t){WHMCS.http.jqClient.post($(this).data("url"),"token="+csrfToken+"&autosearch="+t)}),$(a.refs.hideinactive).bootstrapSwitch().on("switchChange.bootstrapSwitch",function(e,t){t=t?1:0;$("#intelliSearchHideInactive").attr("value",t),a.search()}),$(a.refs.resultheadings).click(function(e){a.toggleResultSet($(this))}),$(blendIntelliSearch.refs.results+" .collapse-toggle").click(function(e){e.preventDefault(),blendIntelliSearch.toggleAllResultSets()}),$(document).on("click",blendIntelliSearch.refs.expandbtn,function(e){e.preventDefault(),blendIntelliSearch.expandResults($(this),$(this).data("type"))})},inputExpand:function(){var e,t,a=$(this.refs.form);a.data("expanded")||(t=(e=a.offset()).left,e.left-=100,a.data("expanded",!0).data("leftpos",e.left).css({position:"absolute",top:e.top,left:t}).animate({left:e.left},200,function(){$("#btnNavbarToggle").is(":visible")?a.delay(10).queue(function(e){$(this).addClass("active full-width"),e()}):a.addClass("active").css("width",$(window).width()-e.left-5)}),$(this.refs.value).val()&&$(this.refs.results).slideDown())},inputKeyUp:function(){clearTimeout(this.typingTimer),3<=$(this.refs.value).val().replace(/\s/g,"").length&&$("#intelliSearchRealtime").is(":checked")&&(this.typingTimer=setTimeout(this.search,750))},showLoader:function(){$(this.refs.form).find(".loader").removeClass("fa-search").addClass("fa-spinner fa-spin")},endLoader:function(){$(this.refs.form).find(".loader").addClass("fa-search").removeClass("fa-spinner fa-spin")},resetResults:function(){$(this.refs.searchResults).find("h5").hide().end().find("ul li:not(.template)").remove().end().find(".search-more-results").remove()},getResultTypes:function(){var t=[];return $(".search-results ul").each(function(e){t.push($(this).data("type"))}),t},getResultTarget:function(e){return $(this.refs.searchResults+' ul[data-type="'+e+'"]')},getNumResults:function(e){return this.getResultTarget(e).find("li:not(.template)").length},getTotalResults:function(){return $(this.refs.searchResults+" ul").find("li:not(.template)").length},getTemplateByType:function(e){e=this.getResultTarget(e).find("li.template").clone();return e.removeClass("template"),e},renderResults:function(a,e){var i,t;0!=e.length&&(i=this.getTemplateByType(a),$.each(e,function(e,t){t="string"==typeof t?"<li>"+t+"</li>":blendIntelliSearch.mergeResultData(i.clone(),t);blendIntelliSearch.addResult(a,t)}),t=this.getNumResults(a),this.getResultTarget(a).prev("h5").show().find(".count").html(t),e[0].totalResults>t&&(t=e[0].totalResults-t,this.showExpand(a,t)))},showExpand:function(e,t){$(this.refs.expand).val()!=e&&(cloneRow=$(this.refs.searchMoreTpl).clone(),cloneRow.attr("data-type",e),cloneRow.removeClass("hidden"),stringValue=cloneRow.html(),stringValue=stringValue.replace(":count",t),cloneRow.html(stringValue),this.addResult(e,cloneRow))},addResult:function(e,t){this.getResultTarget(e).append(t)},mergeResultData:function(e,t){return str=e.html(),$.each(t,function(e,t){str=str.replace(new RegExp("\\["+e+"\\]","g"),t)}),e.html(str)},search:function(e){var i=blendIntelliSearch;i.activeSearch||(i.activeSearch=!0,i.showLoader(),$(i.refs.results).is(":visible")||$(i.refs.results).slideDown(),$(i.refs.expand).val(e),WHMCS.http.jqClient.jsonPost({url:$(i.refs.form+" form").attr("action"),data:$(i.refs.form+" form").serialize(),success:function(a){$(i.refs.expand).val()||i.resetResults(),$.each(i.getResultTypes(),function(e,t){i.renderResults(t,a[t])}),i.searchComplete(!0)},warning:function(e){$(i.refs.results).find(".search-warning").find(".warning-msg").html(e),i.searchComplete(!1,".search-warning")},error:function(e){i.searchComplete(!1,".error")},fail:function(e){i.searchComplete(!1,".session-expired")}}))},searchComplete:function(e,t){e&&(e=this.getTotalResults(),$(this.refs.results).find(".search-result-count").html(e),t=0===e?".search-no-results":".search-results"),$(this.refs.results).find(".outcome").not(t).hide(),$(this.refs.results).find(t).is(":visible")||$(this.refs.results).find(t).fadeIn(),this.endLoader(),this.activeSearch=!1},expandResults:function(e,t){e.remove(),this.search(t)},close:function(){var t=$(this.refs.form);$(this.refs.results).slideUp(),t.css({width:"",left:$(this.refs.form).data("leftpos")}).removeClass("active full-width").delay(100).queue(function(e){t.css({position:"",top:"",left:""}),e()}).data("expanded",!1),$(".logo").focus(),clearTimeout(this.typingTimer)},toggleResultSet:function(e){var t=e.next("ul");t.is(":visible")?(t.slideUp(),e.addClass("collapsed")):(t.slideDown(),e.removeClass("collapsed"));var a=$(this.refs.results+" h5:visible").length,t=$(this.refs.results+" h5:visible:not(.collapsed)").length,e=$(this.refs.results+" .collapse-toggle");0==t?e.html(e.data("lang-expand")):a==t&&e.html(e.data("lang-collapse"))},toggleAllResultSets:function(){var e=$(this.refs.results+" h5:visible:not(.collapsed)").length,t=$(this.refs.results+" .collapse-toggle");0==e?($(this.refs.results+" ul").slideDown(),$(this.refs.results+" h5").removeClass("collapsed"),t.html(t.data("lang-collapse"))):($(this.refs.results+" ul").slideUp(),$(this.refs.results+" h5").addClass("collapsed"),t.html(t.data("lang-expand")))}};$(document).ready(blendIntelliSearch.init);var blendNav={refs:{toggle:"#btnNavbarToggle",navbar:".navigation",collapse:".navigation .navbar-collapse",collapseMenuItem:".navigation .navbar-collapse li.has-dropdown > a",collapseMenuListItem:".navigation .navbar-collapse li.has-dropdown > ul li:not(.expand) > a",backdrop:"#nav-backdrop"},init:function(){var t=blendNav;$(t.refs.toggle).click(function(e){e.preventDefault(),t.toggleNavbar()}),$(t.refs.collapseMenuItem).click(function(e){$(t.refs.toggle).is(":visible")&&(e.preventDefault(),$(this).parent("li").toggleClass("expanded"))}),$(t.refs.collapseMenuListItem).click(function(){t.toggleNavbar()}),t.fixNavWidths()},toggleNavbar:function(){var e;$(this.refs.collapse).is(":visible")?($(this.refs.collapse).hide(),$(this.refs.backdrop).remove(),$("html, body").css("overflow","auto"),$(this).removeClass("active")):(e=$(this.refs.navbar).offset().top+45,$(this.refs.collapse).css({top:e,height:$(window).height()-e}).show(),$(document.createElement("div")).attr("id","nav-backdrop").addClass("modal-backdrop nav-modal-backdrop").css("opacity","0.5").css("position","absolute").css("top",e).appendTo("body"),$("html, body").css("overflow","hidden"),$(this).addClass("active"))},fixNavWidths:function(){1260<=$(window).width()&&$(this.refs.collapse+" > ul > li:not(.bt)").each(function(e){$(this).css("width",$(this).width()+4)})}};$(document).ready(blendNav.init);var blendSidebar={refs:{sidebar:"#sidebar",content:"#contentarea",opener:"#sidebarOpener",closer:"#sidebarClose",collapse:".sidebar-collapse",collapseExpand:"#sidebarCollapseExpand"},init:function(){var t=blendSidebar;$(t.refs.opener).click(function(e){e.preventDefault(),$(this).fadeOut(),$(t.refs.content).removeClass("sidebar-minimized"),$(t.refs.sidebar).delay(400).fadeIn("fast"),WHMCS.http.jqClient.post(whmcsBaseUrl+adminBaseRoutePath+"/search.php","a=maxsidebar")}),$(t.refs.closer).click(function(e){e.preventDefault(),$(t.refs.sidebar).fadeOut("fast",function(){$(t.refs.content).addClass("sidebar-minimized"),$(t.refs.opener).fadeIn()}),WHMCS.http.jqClient.post(whmcsBaseUrl+adminBaseRoutePath+"/search.php","a=minsidebar")}),$(t.refs.collapseExpand).click(function(e){e.preventDefault(),$(this).toggleClass("expanded"),$(t.refs.collapse).slideToggle()})}};function toggleadvsearch(){"hidden"==document.getElementById("searchbox").style.visibility?document.getElementById("searchbox").style.visibility="":document.getElementById("searchbox").style.visibility="hidden"}function populate(e){if(d=document.getElementById("searchfield"),v=e.options[e.selectedIndex].value,d){var t=new Array;if(t.clients=["Client ID","Client Name","Company Name","Email Address","Address 1","Address 2","City","State","Postcode","Country","Phone Number","CC Last Four","Notes"],t.orders=["Order ID","Order #","Client Name","Order Date","Amount"],t.services=["Service ID","Domain","Client Name","Product","Billing Cycle","Next Due Date","Status","Username","Dedicated IP","Assigned IPs","Subscription ID","Notes"],t.domains=["Domain ID","Domain","Client Name","Registrar","Expiry Date","Status","Subscription ID","Notes"],t.invoices=["Invoice #","Client Name","Line Item","Invoice Date","Due Date","Date Paid","Total Due","Status"],t.tickets=["Ticket #","Tag","Subject","Client Name","Email Address"],d.options.length=0,cur=t[e.options[e.selectedIndex].value],cur){d.options.length=cur.length;for(var a=0;a<cur.length;a++)d.options[a].text=cur[a],d.options[a].value=cur[a];"services"!=v&&"domains"!=v&&"clients"!=v||(document.getElementById("searchfield").selectedIndex=1)}}}function scrollToGatewayInputError(){var e=jQuery(".gateway-errors,.assisted-cc-input-feedback").first();(e.closest("form")||jQuery("form").first()).find('button[type="submit"],input[type="submit"]').prop("disabled",!1).removeClass("disabled").find("i.fas,i.far,i.fal,i.fab").removeAttr("class").addClass("fas fa-arrow-circle-right").find("span").toggle(),e.length&&elementOutOfViewPort(e[0])&&jQuery("html, body").animate({scrollTop:e.offset().top-50},500)}function elementOutOfViewPort(e){var t=e.getBoundingClientRect(),e={};return e.top=t.top<0,e.left=t.left<0,e.bottom=t.bottom>(window.innerHeight||document.documentElement.clientHeight),e.right=t.right>(window.innerWidth||document.documentElement.clientWidth),e.any=e.top||e.left||e.bottom||e.right,e.any}$(document).ready(blendSidebar.init),function(e,t){"object"!=typeof e.WHMCS&&(e.WHMCS=t)}(window,{hasModule:function(e){return void 0!==WHMCS[e]&&0<Object.getOwnPropertyNames(WHMCS[e]).length},loadModule:function(e,t){if(!this.hasModule(e))if(WHMCS[e]={},"function"==typeof t)t.apply(WHMCS[e]);else for(var a in t)t.hasOwnProperty(a)&&(WHMCS[e][a]={},t[a].apply(WHMCS[e][a]))}}),jQuery(document).ready(function(){jQuery(document).on("click",".disable-on-click",function(){var e;jQuery(this).addClass("disabled"),jQuery(this).hasClass("spinner-on-click")&&(e=$(this).find("i.fas,i.far,i.fal,i.fab"),jQuery(e).removeAttr("class").addClass("fas fa-spinner fa-spin"))})}),WHMCS.hasModule("adminUtils")||WHMCS.loadModule("adminUtils",function(){return this.getAdminRouteUrl=function(e){return whmcsBaseUrl+"/index.php?rp="+adminBaseRoutePath+e},this.normaliseStringValue=function(e){return e?e.toLowerCase().replace(/\s/g,"-"):""},this.generatePassword=function(e){var t=this.getPasswordCharacterSet();var a="";for(var i=0;e>i;i++)a+=t[this.randomInt(t.length)];return a},this.getPasswordCharacterSet=function(){var e="0123456789"+"abcdefghijklmnopqrstuvwxyz"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"!#$%()*+,-.:;=@_|{ldelim}{rdelim}~";var t=[];for(var a=0;e.length>a;a++){var i=e.charCodeAt(a);if(55296>i||i>=57344){var n=e.charAt(a);if(t.indexOf(n)==-1)t.push(n);continue}if(56320>i?e.length>a+1:false){var r=e.charCodeAt(a+1);if(r>=56320?57344>r:false){var n=e.substring(a,a+2);a++;if(t.indexOf(n)==-1)t.push(n);continue}}throw new Error("Invalid UTF-16")}return t},this.randomInt=function(e){var t=this.randomIntMathRandom(e);t=(t+this.randomIntBrowserCrypto(e))%e;return t},this.randomIntMathRandom=function(e){var t=Math.floor(Math.random()*e);if(0>t||t>=e)throw new Error("Arithmetic exception");return t},this.randomIntBrowserCrypto=function(e){var t=null;if("crypto"in window)t=crypto;else if("msCrypto"in window)t=msCrypto;else return 0;if(!("getRandomValues"in t)||!("Uint32Array"in window)||typeof Uint32Array!="function")t=null;if(t==null)return 0;var a=new Uint32Array(1);do{t.getRandomValues(a)}while(a[0]-a[0]%e>4294967296-e);return a[0]%e},this}),function(e){WHMCS.hasModule("http")||WHMCS.loadModule("http",e)}({jqClient:function(){return _getSettings=function(e,t,a,i){return"object"==typeof e?e:("function"==typeof t&&(a=t,t=null),{url:e,data:t,success:a,dataType:i})},this.get=function(e,t,a,i){return WHMCS.http.client.request(jQuery.extend(_getSettings(e,t,a,i),{type:"GET"}))},this.post=function(e,t,a,i){return WHMCS.http.client.request(jQuery.extend(_getSettings(e,t,a,i),{type:"POST"}))},this.jsonGet=function(a){a=a||{},this.get(a.url,a.data,function(e){e.warning?(console.log("[WHMCS] Warning: "+e.warning),"function"==typeof a.warning&&a.warning(e.warning)):e.error?(console.log("[WHMCS] Error: "+e.error),"function"==typeof a.error&&a.error(e.error)):"function"==typeof a.success&&a.success(e)},"json").error(function(e,t){console.log("[WHMCS] Error: "+t),"function"==typeof a.fail&&a.fail(t)}).always(function(){"function"==typeof a.always&&a.always()})},this.jsonPost=function(a){a=a||{},this.post(a.url,a.data,function(e){e.warning?(console.log("[WHMCS] Warning: "+e.warning),"function"==typeof a.warning&&a.warning(e.warning)):e.error?(console.log("[WHMCS] Error: "+e.error),"function"==typeof a.error&&a.error(e.error)):"function"==typeof a.success&&a.success(e)},"json").fail(function(e,t){console.log("[WHMCS] Fail: "+t),"function"==typeof a.fail&&a.fail(t,e)}).always(function(){"function"==typeof a.always&&a.always()})},this},client:function(){var n=this;return _beforeRequest=function(e){return void 0===e.type&&(e.type="GET"),e},this.request=function(e){return e=_beforeRequest(e||{}),jQuery.ajax(e)},jQuery.each(["get","post","put","delete"],function(e,t){var a,i;n[t]=(a=t,i=n,function(e){return(e=e||{}).type=a.toUpperCase(),i.request(e)})}),this}}),WHMCS.hasModule("ui")||WHMCS.loadModule("ui",{confirmation:function(){var t=[];return this.register=function(e){return t.indexOf(e=void 0===e?"[data-toggle=confirmation]":e)<0&&t.push(e),jQuery(e).confirmation({rootSelector:e}),t},this},dataTable:function(){return this.tables={},this.register=function(){var a=this;jQuery("table.data-driven").each(function(e,t){a.getTableById(t.id,void 0)})},this.getTableById=function(e,a){var t,i,n=this,r=jQuery("#"+e);return void 0===n.tables[e]?(void 0===a&&(a={dom:'<"listtable"ift>pl',paging:!1,lengthChange:!1,searching:!1,ordering:!0,info:!1,autoWidth:!0,columns:[],lengthMenu:[10,25,50,100,500,1e3],language:{emptyTable:r.data("langEmptyTable")?r.data("langEmptyTable"):"No records found"}}),jQuery.each(r.data(),function(e,t){if(void 0!==t)if("ajaxUrl"!==e)if("lengthChange"!==e){if("pageLength"!==e)return"langEmptyTable"===e?(void 0===a.language&&(a.language={}),void(a.language.emptyTable=t)):"langZeroRecords"===e?(void 0===a.language&&(a.language={}),void(a.language.zeroRecords=t)):void(a.key=t);a.pageLength=t}else a.lengthChange=t;else a.ajax={url:t}}),jQuery.each(r.find("th"),function(){void 0===a.columns&&(a.columns=[]),a.columns.push({data:jQuery(this).data("name")})}),n.tables[e]=n.initTable(r,a)):void 0!==a&&(i=(t=n.tables[e]).init(),i=jQuery.extend(i,a),t.destroy(),n.tables[e]=n.initTable(r,i)),n.tables[e]},this.initTable=function(i,e){var e=i.DataTable(e),t=this;return i.data("on-draw")?e.on("draw.dt",function(e,t){var a=i.data("on-draw");"function"==typeof window[a]&&window[a](e,t)}):i.data("on-draw-rebind-confirmation")&&e.on("draw.dt",function(e){t.rebindConfirmation(e)}),e},this.rebindConfirmation=function(e){for(var t=this,a=e.target.id,i=WHMCS.ui.confirmation.register(),n=0,r=i.length;n<r;n++)jQuery(i[n]).on("confirmed.bs.confirmation",function(e){e.preventDefault(),WHMCS.http.jqClient.post(jQuery(e.target).data("target-url"),{token:csrfToken}).done(function(e){"success"!==e.status&&"okay"!==e.status||t.getTableById(a,void 0).ajax.reload()})})},this},clipboard:function(){return this.copy=function(e){e.preventDefault();var t=$(e.currentTarget),a=$(t).data("clipboard-target"),e=$(a).parent();try{var i=$("<textarea>").css("position","fixed").css("opacity","0").css("width","1px").css("height","1px").val($(a).val());e.append(i),i.focus().select(),document.execCommand("copy")}finally{i.remove()}t.tooltip({trigger:"click",placement:"bottom"}),WHMCS.ui.toolTip.setTip(t,"Copied!"),WHMCS.ui.toolTip.hideTip(t)},this},toolTip:function(){this.setTip=function(e,t){var a=e.data("bs.tooltip");return"in"!==a.hoverState&&(a.hoverState="in"),e.attr("data-original-title",t),a.show(),a},this.hideTip=function(e){return setTimeout(function(){e.data("bs.tooltip").hide()},2e3)}},jsonForm:function(){return this.managedElements="input,textarea,select",this.initFields=function(e){var t=this;$(e).find(t.managedElements).each(function(){var e=this;$(e).on("keypress change",function(){t.fieldHasError(e)&&t.clearFieldError(e)})})},this.init=function(t){var a=this;a.initFields(t),$(t).on("submit",function(e){e.preventDefault(),e.stopPropagation(),a.clearErrors(t);e=$(t).parents('.modal[role="dialog"]').first();$(e).length&&($(e).on("show.bs.modal hidden.bs.modal",function(){a.clearErrors(t)}),$(e).on("show.bs.modal",function(){$(t)[0].reset()})),WHMCS.http.client.post({url:$(t).attr("action"),data:$(t).serializeArray()}).done(function(e){a.onSuccess(t,e)}).fail(function(e){a.onError(t,e)}).always(function(e){a.onRequestComplete(t,e)})})},this.initAll=function(){var e=this;$('form[data-role="json-form"]').each(function(){e.init(this)})},this.markFieldErrors=function(e,t){var a,i,n=null;for(i in t)t.hasOwnProperty(i)&&(n=t[i]),a=this.managedElements.split(",").map(function(e){return e+'[name="'+i+'"]'}).join(","),a=$(e).find(a),n&&($(a).parents(".form-group").addClass("has-error"),$(a).attr("title",n),$(a).tooltip());$(e).find(".form-group.has-error input[title]").first().tooltip("show")},this.fieldHasError=function(e){return $(e).parents(".form-group").hasClass("has-error")},this.clearFieldError=function(t){try{$(t).tooltip("dispose")}catch(e){$(t).tooltip("destroy")}$(t).parents(".form-group").removeClass("has-error")},this.onSuccess=function(e,t){e=$(e).data("on-success");"function"==typeof e&&e(t.data)},this.onError=function(e,t){t.responseJSON&&t.responseJSON.fields&&"object"==typeof t.responseJSON.fields?this.markFieldErrors(e,t.responseJSON.fields):console.log("Unknown error - please try again later.");e=$(e).data("on-error");"function"==typeof e&&e(t)},this.clearErrors=function(e){var t=this;$(e).find(t.managedElements).each(function(){t.clearFieldError(this)})},this.onRequestComplete=function(e,t){},this},effects:function(){this.errorShake=function(e){var d={},d=$.extend({direction:"left",distance:8,times:3,speed:90},d);return e.each(function(){var e=$(this),t={position:e.css("position"),top:e.css("top"),bottom:e.css("bottom"),left:e.css("left"),right:e.css("right")};e.css("position","relative");var a="up"===d.direction||"down"===d.direction?"top":"left",i="up"===d.direction||"left"===d.direction?"pos":"neg",n={},r={},s={};n[a]=("pos"==i?"-=":"+=")+d.distance,r[a]=("pos"==i?"+=":"-=")+2*d.distance,s[a]=("pos"==i?"-=":"+=")+2*d.distance,e.animate(n,d.speed);for(var o=1;o<d.times;o++)e.animate(r,d.speed).animate(s,d.speed);e.animate(r,d.speed).animate(n,d.speed/2,function(){e.css(t)})})}}}),WHMCS.hasModule("form")||WHMCS.loadModule("form",function(){return this.checkAllBound=false,this.register=function(){if(!this.checkAllBound){this.bindCheckAll();this.checkAllBound=true}},this.bindCheckAll=function(){var e=".btn-check-all";jQuery("body").on("click",e,function(e){var t=jQuery(e.target);var a=jQuery("#"+t.data("checkbox-container")+' input[type="checkbox"]');if(t.data("btn-check-toggle")){var i="Deselect All";var n="Select All";if(t.data("label-text-deselect"))i=t.data("label-text-deselect");if(t.data("label-text-select"))n=t.data("label-text-select");if(t.hasClass("toggle-active")){a.prop("checked",false);t.text(n);t.removeClass("toggle-active")}else{a.prop("checked",true);t.text(i);t.addClass("toggle-active")}}else if(t.data("btn-toggle-on"))a.prop("checked",true);else a.prop("checked",false)})},this.reloadCaptcha=function(e){if(typeof grecaptcha!=="undefined")grecaptcha.reset();else{if(!e)e=jQuery("#inputCaptchaImage");var t=jQuery(e).data("src");jQuery(e).attr("src",t+"?nocache="+(new Date).getTime());var a=jQuery("#inputCaptcha");if(a.length)a.val("")}},this}),WHMCS.hasModule("selectize")||WHMCS.loadModule("selectize",function(){return this.clientSearch=function(){var i=function(e,t){if(typeof dropdownSelectClient==="function")if(jQuery(".selectize-dropdown-content > div").length===0)dropdownSelectClient(t(e.id),t(e.name)+(e.companyname?" ("+t(e.companyname)+")":"")+(e.id>0?" - #"+t(e.id):""),t(e.email));return'<div><span class="name">'+t(e.name)+(e.companyname?" ("+t(e.companyname)+")":"")+(e.id>0?" - #"+t(e.id):"")+"</span></div>"};var e=".selectize-client-search";var t=jQuery(e);var n=this;var r=[];t.each(function(){var t=$(this);var e={valueField:t.data("value-field"),allowEmptyOption:t.data("allow-empty-option")===1,labelField:"name",render:{item:i},optgroupField:"status",optgroupLabelField:"name",optgroupValueField:"id",optgroups:[{$order:1,id:"active",name:t.data("active-label")},{$order:2,id:"inactive",name:t.data("inactive-label")}],load:n.builder.onLoadEvent(t.data("search-url"),function(e){return{dropdownsearchq:e,clientId:a.currentValue,showNoneOption:t.data("allow-empty-option")===1}}),onChange:function(e){if(e&&typeof dropdownSelectClient==="function"){e=parseInt(e);var t=jQuery(".selectize-dropdown-content div[data-value|='"+e+"']");dropdownSelectClient(e,t.children("span.name").text(),t.children("span.email").text())}}};var a=n.clients(t,undefined,e);a.on("change",n.builder.onChangeEvent(a,"#goButton"));return r.push(a)});if(r.length>1)return r;return r[0]},this.userSearch=function(){var i=function(e,t){var a="",i=!isNaN(e.id);if(i&&e.id>0)a=" - #"+t(e.id);return'<div><span class="name">'+t(e.name)+a+"</span></div>"};var n=".selectize-user-search";var e=jQuery(n);var r=this;var s=[];e.each(function(){var e=$(this);var t={valueField:e.data("value-field"),labelField:"name",render:{item:i},preload:false,load:r.builder.onLoadEvent(e.data("search-url"),function(e){return{token:csrfToken,search:e}})};var a=r.users(n,undefined,t);return s.push(a)});if(s.length>1)return s;return s[0]},this.serviceSearch=function(){var i=function(e){var t=$("<div>");if(e.color)t.css("background-color",e.color);t.append($("<span>").attr("class","name").text(e.name));return t};var n=".selectize-service-search";var e=jQuery(n);var r=this;var s=[];e.each(function(){var e=$(this);var t={valueField:"id",labelField:"name",render:{item:i},preload:true,load:r.builder.onLoadEvent(e.data("search-url"),function(e){return{token:csrfToken,search:e}})};var a=r.services(n,undefined,t);return s.push(a)});if(s.length>1)return s;return s[0]},this.clients=function(e,t,a){var i=this.register(e,t,WHMCS.selectize.optionDecorator.client,a);i.settings.searchField=["name","email","companyname"];return i},this.users=function(e,t,a){var i=this.register(e,t,WHMCS.selectize.optionDecorator.user,a);i.settings.searchField=["name","email"];return i},this.services=function(e,t,a){var i=this.register(e,t,WHMCS.selectize.optionDecorator.service,a);i.settings.searchField=["name","noResults"];return i},this.billingContacts=function(e,t,a){var i=this.register(e,t,WHMCS.selectize.optionDecorator.billingContact,a);i.settings.searchField=["name","email","companyname","address"];return i},this.payMethods=function(e,t,a){var i=this.register(e,t,WHMCS.selectize.optionDecorator.payMethod,a);i.settings.searchField=["description","shortAccountNumber","type","payMethodType"];return i},this.html=function(e,t,a){var i=this.register(e,t,function(e,t){return'<div class="item">'+e.html+"</div>"},a);i.settings.searchField=["html"];return i},this.simple=function(e,t,a){var i=this.register(e,t,function(e,t){return'<div class="item">'+e.value+"</div>"},a);i.settings.searchField=["value"];return i},this.register=function(e,t,a,i){var n=this;var r=jQuery(e);var s=n.builder.init(r,i);var o=n.builder.itemDecorator(a);if(typeof i==="undefined"){s.settings.render.item=o;s.settings.render.option=o}else if(typeof i.render==="undefined"){s.settings.render.item=o;s.settings.render.option=o}else{if(typeof i.render.item==="undefined")s.settings.render.item=o;if(typeof i.render.option==="undefined")s.settings.render.option=o}this.builder.addOptions(s,t);return s},this.optionDecorator={client:function(e,t){var a=t(e.name),i="",n="",r="";if(e.companyname)i=" ("+t(e.companyname)+")";if(typeof e.descriptor==="undefined")n=e.id>0?" - #"+t(e.id):"";else n=t(e.descriptor);if(e.email)r='<span class="email">'+t(e.email)+"</span>";return"<div>"+'<span class="name">'+a+i+n+"</span>"+r+"</div>"},user:function(e,t){var a=t(e.name),i="",n="",r=!isNaN(e.id);if(typeof e.descriptor==="undefined")i=r&&e.id>0?" - #"+t(e.id):"";else i=t(e.descriptor);if(r&&e.id>0&&e.email)n='<span class="email">'+t(e.email)+"</span>";return"<div>"+'<span class="name">'+a+i+"</span>"+n+"</div>"},billingContact:function(e,t){var a=t(e.name),i="",n="",r="",s="";if(e.companyname)i=" ("+t(e.companyname)+")";if(typeof e.descriptor==="undefined")n=e.id>0?" - #"+t(e.id):"";else n=t(e.descriptor);if(e.email)r='<span class="email">'+t(e.email)+"</span>";if(e.address)s='<span class="email">'+t(e.address)+"</span>";return"<div>"+'<span class="name">'+a+i+n+"</span>"+r+s+"</div>"},payMethod:function(e,t){var a="",i="",n="",r="",s="";if(e.brandIcon)a='<i class="'+e.brandIcon+'"></i>';if(e.isDefault)n='&nbsp;&nbsp;<i class="fal fa-user-check"></i>';if(e.description)i=e.description;if(e.shortAccountNumber)if(i.indexOf(e.shortAccountNumber)===-1)r="("+t(e.shortAccountNumber)+")";if(e.detail1)s='<span class="mouse">'+t(e.detail1)+"</span>";return"<div>"+'<span class="name"> '+a+"&nbsp;"+i+"&nbsp;"+r+"&nbsp;"+"&nbsp;&nbsp;"+s+"&nbsp;&nbsp;"+n+"</span>"+"</div>"},service:function(e,t){var a="";if(e.color)a=' style="background-color: '+e.color+';"';return"<div"+a+'><span class="name">'+t(e.name)+"</span>"+(e.noResults?'<span class="email">'+t(e.noResults)+"</span>":"")+"</div>"}},this.builder={init:function(i,e){var t,a={plugins:["whmcs_no_results"],valueField:"id",labelField:"id",create:false,maxItems:1,preload:"focus"};if(typeof e==="undefined")e={};t=jQuery.extend({},a,e);var n=i.selectize(t);n=n[0].selectize;n.currentValue="";n.on("focus",function(){n.currentValue=n.getValue();n.clear()});n.on("blur",function(){var e=n.getValue(),t=!isNaN(e),a=1;if(i.data("allow-empty-option")===1)a=0;if(e===""||t&&e<a)n.setValue(n.currentValue)});return n},addOptions:function(e,t){if(typeof t!=="undefined"&&t.length)e.addOption(t)},itemDecorator:function(e){if(typeof e==="function")return e;else if(typeof e==="undefined")return WHMCS.selectize.optionDecorator.user},onLoadEvent:function(a,i){return function(e,t){jQuery.ajax({url:a,type:"POST",dataType:"json",data:i(e),error:function(){t()},success:function(e){t(e)}})}},onChangeEvent:function(a,i){var e;if(typeof i!=="undefined")e=function(e){var t=jQuery(i);if(t.length)if(!isNaN(a.currentValue)&&a.currentValue>0&&(e.length&&e!==a.currentValue))t.click()};return e}},this}),jQuery(document).ready(function(){jQuery('[data-toggle="tooltip"]').tooltip(),jQuery('[data-toggle="popover"]').popover(),jQuery(".inline-editable").editable({mode:"inline",params:function(e){return e.action="savefield",e.token=csrfToken,e}}),generateBootstrapSwitches(),jQuery("select.form-control.enhanced").select2({theme:"bootstrap"}),jQuery("body").on("click",".copy-to-clipboard",WHMCS.ui.clipboard.copy),jQuery(".credit-card-type li a").click(function(){jQuery("#selectedCard").html(jQuery(this).html()),jQuery("#cctype").val(jQuery("span.type",this).html())}),jQuery(".paging-dropdown li a,.page-selector").click(function(){if(jQuery(this).parent().hasClass("disabled"))return!1;var e=jQuery("#frmRecordsFound");return jQuery("#currentPage").html(jQuery(this).data("page")),e.find('input[name="page"]').val(jQuery(this).data("page")).end(),e.submit(),!1}),jQuery(".no-results a").click(function(e){e.preventDefault(),jQuery("#checkboxShowHidden").bootstrapSwitch("state",!1)}),jQuery("body").on("click","a.autoLinked",function(e){if(e.preventDefault(),jQuery(this).hasClass("disabled"))return!1;e=window.open();e.opener=null,e.location=$(this).attr("href")}),jQuery("#divModuleSettings").on("click",".icon-refresh",function(){fetchModuleSettings(jQuery(this).data("product-id"),"simple"),processAddonDisplay()}),jQuery("#mode-switch").click(function(){fetchModuleSettings(jQuery(this).data("product-id"),jQuery(this).attr("data-mode"))}),$("body").on("click",".modal-wizard .modal-submit",function(){var s=$("#modalAjax");s.find(".loader").show(),s.find(".modal-submit").prop("disabled",!0),$(".modal-wizard .wizard-step:hidden :input").attr("disabled",!0);var e=document.forms.namedItem("frmWizardContent"),t=new FormData(e),a=$(".modal-wizard .wizard-step:visible").data("step-number"),n=$("#ccGatewayFormSubmitted").val(),e=$("#enomFormSubmitted").val(),o=new XMLHttpRequest;n&&3==a||e&&5==a?(wizardStepTransition(!1,!0),fadeoutLoaderAndAllowSubmission(s)):(o.open("POST",$("#frmWizardContent").attr("action"),!0),o.send(t),o.onload=function(){if(200==o.status)try{var e,t=JSON.parse(o.responseText),a=$("#btnWizardDoNotShow");if(a.is(":visible")&&a.fadeOut("slow",function(){$("#btnWizardSkip").hide().removeClass("hidden").fadeIn("slow")}),t.success){if(t.sslData){var n=t.sslData;if(n.approverEmails)for(i=0;i<n.approverEmails.length;i++){var r=n.approverEmails[i];$(".modal-wizard .cert-approver-emails").append('<label class="radio-inline"><input type="radio" name="approver_email" value="'+r+'"> '+r+"</label><br>")}if(n.approvalMethods)for(i=0;i<n.approvalMethods.length;i++)$("label[for='"+n.approvalMethods[i]+"Method']").removeClass("hidden").show()}else t.authData&&("emailauth"==(e=t.authData).method?($(".modal-wizard .cert-email-auth").removeClass("hidden"),$(".modal-wizard .cert-email-auth-emailapprover").val(e.email)):"fileauth"==e.method?($(".modal-wizard .cert-file-auth").removeClass("hidden"),$(".modal-wizard .cert-file-auth-filename").val("http://<domain>/"+e.path+"/"+e.name),$(".modal-wizard .cert-file-auth-contents").val(e.contents)):"dnsauth"==e.method&&($(".modal-wizard .cert-dns-auth").removeClass("hidden"),$(".modal-wizard .cert-dns-auth-contents").val(e.value),$(".modal-wizard .cert-dns-auth-host").val(e.host),$(".modal-wizard .cert-dns-auth-type").val(e.type)));t.refreshMc&&$("#btnMcServiceRefresh").click(),wizardStepTransition(t.skipNextStep,!1)}else wizardError(t.error)}catch(e){wizardError("An error occurred while communicating with the server. Please try again.")}finally{fadeoutLoaderAndAllowSubmission(s)}else alert("An error occurred while communicating with the server. Please try again."),s.find(".loader").fadeOut()})}).on("click","#btnWizardSkip",function(e){e.preventDefault();e=$("#inputWizardStep").val();wizardStepTransition("2"!==e&&"4"!==e?!1:!0,!0)}).on("click","#btnWizardBack",function(e){e.preventDefault(),wizardStepBackTransition()}).on("click","#btnWizardDoNotShow",function(e){e.preventDefault(),WHMCS.http.jqClient.post("wizard.php","dismiss=true",function(){$("#modalAjax").modal("hide")})}),$("#modalAjax").on("hidden.bs.modal",function(e){$("#modalAjax").hasClass("modal-wizard")&&($("#btnWizardSkip").remove(),$("#btnWizardBack").remove(),$("#btnWizardDoNotShow").remove())}),$("#prodsall").click(function(){var e=$(".checkprods");e.filter(":visible").prop("checked",$(this).prop("checked")).end(),$(this).prop("checked")&&e.filter(":hidden").prop("checked",!$(this).prop("checked")).end()}),$("#addonsall").click(function(){var e=$(".checkaddons");e.filter(":visible").prop("checked",$(this).prop("checked")).end(),$(this).prop("checked")&&e.filter(":hidden").prop("checked",!$(this).prop("checked")).end()}),$("#domainsall").click(function(){var e=$(".checkdomains");e.filter(":visible").prop("checked",$(this).prop("checked")).end(),$(this).prop("checked")&&e.filter(":hidden").prop("checked",!$(this).prop("checked")).end()}),jQuery("#addPayment").submit(function(e){e.preventDefault(),addingPayment=!1,jQuery("#btnAddPayment").attr("disabled","disabled"),jQuery("#paymentText").hide(),jQuery("#paymentLoading").removeClass("hidden").show();e=jQuery(this).serialize().replace("action=edit","action=checkTransactionId");WHMCS.http.jqClient.post("invoices.php",e+"&ajax=1").done(function(e){0==e.unique?jQuery("#modalDuplicateTransaction").modal("show"):addInvoicePayment()})}),$("#modalDuplicateTransaction").on("hidden.bs.modal",function(){!1===addingPayment&&jQuery("#paymentLoading").hide("fast",function(){jQuery("#paymentText").show("fast"),jQuery("#btnAddPayment").removeAttr("disabled")})}),jQuery(document).on("click",".feature-highlights-content .btn-action-1, .feature-highlights-content .btn-action-2",function(){var e=jQuery(this).data("link"),t=jQuery(this).data("link-title");WHMCS.http.jqClient.post("whatsnew.php",{action:"link-click",linkId:e,linkTitle:t,token:csrfToken})}),"undefined"!=typeof mentionsFormat&&jQuery('#replynote[name="message"],#note[name="note"]').atwho({at:"@",displayTpl:'<li class="mention-list">${gravatar} ${username} - ${name} (${email})</li>',insertTpl:mentionsFormat,data:WHMCS.adminUtils.getAdminRouteUrl("/mentions"),limit:5}),jQuery(".search-bar .search-icon").click(function(e){jQuery(".search-bar").find("input:first").focus()}),jQuery(".btn-search-advanced").click(function(e){jQuery(this).closest(".search-bar").find(".advanced-search-options").slideToggle("fast")}),WHMCS.ui.dataTable.register(),WHMCS.ui.confirmation.register();var e,t=jQuery("#mcConfigureProductPromos");t.length&&(e=t.find(".item").length,t.owlCarousel({loop:!0,margin:10,responsiveClass:!0,responsive:{0:{items:1},850:{items:e<2?e:2},1250:{items:e<3?e:3},1650:{items:e<4?e:4}}}),jQuery("#dismissPromos").on("click",function(){t.slideUp("fast"),jQuery(this).hide(),WHMCS.http.jqClient.post(WHMCS.adminUtils.getAdminRouteUrl("/dismiss-marketconnect-promo"),{token:csrfToken},function(e){})})),jQuery(document).on("submit","#frmCreditCardDeleteDetails",function(e){e.preventDefault(),jQuery("#modalAjax .modal-submit").prop("disabled",!0),jQuery("#modalAjax .loader").show(),$("#remoteFailureDetails").slideUp(),WHMCS.http.jqClient.post(jQuery(this).attr("action"),jQuery(this).serialize(),function(e){e.error?($("#remoteFailureDetails").find(".alert").html(e.errorMsg).end().slideDown(),jQuery("#modalAjax .loader").fadeOut()):updateAjaxModal(e)},"json").fail(function(){jQuery("#modalAjax .modal-body").html("An error occurred while communicating with the server. Please try again."),jQuery("#modalAjax .loader").fadeOut()})}),jQuery(".captcha-type").length&&jQuery(document).on("change",".captcha-type",function(){var e=jQuery(".recaptchasetts");""===jQuery(this).val()?e.hide():e.show()}),jQuery("#frmClientSearch").length&&jQuery(document).on("change",".status",function(){jQuery("#status").val(jQuery(this).val())}),jQuery(".ssl-state.ssl-sync").each(function(){var t=jQuery(this);WHMCS.http.jqClient.post(WHMCS.adminUtils.getAdminRouteUrl("/domains/ssl-check"),{domain:t.data("domain"),userid:t.data("user-id"),token:csrfToken},function(e){t.replaceWith('<img src="'+e.image+'" data-toggle="tooltip" title="'+e.tooltip+'" class="'+e.class+'">'),jQuery('[data-toggle="tooltip"]').tooltip()})}),jQuery.fn.setInputError=function(e){return this.parents(".form-group").addClass("has-error").find(".field-error-msg").text(e),this},jQuery.fn.showInputError=function(){return this.parents(".form-group").addClass("has-error").find(".field-error-msg").show(),this},jQuery(".datatable .view-detail").click(function(e){e.preventDefault(),$currentRow=jQuery(this).closest("tr");var t;jQuery(this).hasClass("expanded")?($currentRow.next("tr.detail-row").hide(),jQuery(this).removeClass("expanded").find("i").removeClass("fa-minus").addClass("fa-plus")):(t=$currentRow.find("td").length,jQuery(this).hasClass("data-loaded")?$currentRow.next("tr.detail-row").show():($currentRow.after('<tr class="detail-row"><td colspan="'+t+'"><i class="fa fa-spinner fa-spin"></i> Loading...</td></tr>'),WHMCS.http.jqClient.jsonGet({url:jQuery(this).attr("href"),success:function(e){$currentRow.next("tr.detail-row").remove(),$currentRow.after('<tr class="detail-row"><td colspan="'+t+'">'+e.output+"</td></tr>")}})),jQuery(this).find("i").addClass("fa-minus").removeClass("fa-plus"),jQuery(this).addClass("expanded").addClass("data-loaded"))}),jQuery(document).on("change",".toggle-display",function(){var e=jQuery(this).data("show"),e=jQuery("."+e);jQuery(document).find("div.toggleable").hide(),e.hasClass("hidden")&&e.removeClass("hidden"),e.show()}),jQuery(document).on("click","button.disable-submit",function(e){var t=jQuery(this),a=t.closest("form");t.prepend('<i class="fas fa-spinner fa-spin"></i> ').addClass("disabled").prop("disabled",!0),a.submit()}),jQuery("#btnResendVerificationEmail").click(function(){var t=$(this);t.prop("disabled",!0).html('<i class="fa fa-spinner fa-spin fa-fw"></i> '+t.html()),WHMCS.http.jqClient.jsonPost({url:window.location.href,data:{token:csrfToken,action:"resendVerificationEmail",userid:t.data("clientid")},success:function(e){e.success?t.html(t.data("successmsg")):t.html(t.data("errormsg"))}})}),"undefined"!=typeof Selectize&&Selectize.define("whmcs_no_results",function(e){var n;this.search=(n=this.search,function(){function t(e){return isNaN(e.id)||0<e.id}var e=n.apply(this,arguments),a=e.items.filter(t),i=e.items.filter(function(e){return!t(e)});return 0<a.length?e.items=a:0<i.length&&(e.items=[i[0]]),e})}),jQuery('.addon-type[name="atype"]').on("change",function(){fetchModuleSettings(jQuery(this).closest("td").data("addon-id")),processAddonDisplay()}),jQuery(document).on("change",".module-action-control",function(){var e=$(this).data("actor"),e=jQuery('.module-action-param-row[data-action-type="'+e+'"]');parseInt($(this).val())?e.show():e.hide()}),jQuery(document).on("click",".btn-create-module-action-custom-field",function(){var t=this,e=jQuery(t).data("product-id");jQuery(t).attr("disabled","disabled"),WHMCS.http.jqClient.jsonPost({url:"configproducts.php",data:{action:"create-module-action-custom-field",id:e,token:csrfToken,field_name:jQuery(t).data("field-name"),field_type:jQuery(t).data("field-type")},success:function(e){var t=jQuery("#btnSaveProduct");jQuery(t).attr("disabled")?jQuery.growl.notice({title:"",message:e.successMsg}):jQuery(t).trigger("click")},error:function(e){jQuery(t).removeAttr("disabled"),jQuery.growl.warning({title:"",message:e})}})}),jQuery.each(jQuery("table.table-themed.data-driven"),function(){var n=$(this),e=n.DataTable();e.on("preXhr.dt",function(e,t,a){var i=document.createElement("div");jQuery(i).css({"background-color":"#fff",opacity:"0.5",position:"absolute",top:n.offset().top,left:n.offset().left,width:n.width()+2,height:n.height()+2,"line-height":n.height()+"px","font-size":"40px","text-align":"center",color:"#000","border-radius":n.css("border-radius"),zIndex:100}).attr("id",n.attr("id")+"overlay").html('<strong><i class="fas fa-spinner fa-pulse"></i></strong>'),n.before(i),a.token=csrfToken}),e.on("xhr.dt",function(e,t,a,i){jQuery("#"+n.attr("id")+"overlay").remove(),n.removeClass("text-muted")})})});var addingPayment=!1,loadedModuleConfiguration=!1,addonSupportsFeatures=!1;function updateServerGroups(e){var t="";$("#inputServerGroup").find("option:not([value=0])").each(function(){t=$(this).attr("data-server-types"),!e||!t||-1<t.indexOf(","+e+",")?$(this).attr("disabled",!1):($(this).attr("disabled",!0),$(this).is(":selected")&&$("#inputServerGroup").val("0"))})}function processAddonDisplay(){var e,t,a=jQuery('input[name="atype"]:checked');loadedModuleConfiguration?(e=jQuery("#associatedPackages"),t=jQuery("#rowProductType,#rowServerGroup"),e.find("option").prop("disabled",!1),addonSupportsFeatures&&jQuery("#addonProvisioningType").find("div.radio").each(function(){$(this).removeClass("radio-disabled").find("input").prop("disabled",!1)}),"feature"===a.val()?(e.find('option[data-server-module!="'+$("#inputModule").val()+'"]').prop("checked",!1).prop("disabled",!0),t.find("select").addClass("disabled").prop("disabled",!0)):(e.find("option").prop("disabled",!1),t.find("select").removeClass("disabled").prop("disabled",!1).find('option[value="notAvailable"]').remove()),e.bootstrapDualListbox("refresh",!0)):setTimeout(processAddonDisplay,100)}function fetchModuleSettings(e,t){var n=!1,r=$("#mode-switch"),s=$("#inputModule").val(),o=jQuery("#addonProvisioningType");return""===s?($("#divModuleSettings").html(""),$("#noModuleSelectedRow").removeClass("hidden"),$("#tblModuleAutomationSettings").find("input[type=radio]").attr("disabled",!0),void(o.length&&(jQuery('input[name="atype"]').first().prop("checked",!0),o.find("div.radio").each(function(e){$(this).addClass("radio-disabled").find("input").prop("disabled",!0)})))):(loadedModuleConfiguration=!1,requestedMode=t="simple"!==(t=t||"simple")&&"advanced"!==t?"simple":t,$("#divModuleSettings").addClass("module-settings-loading"),$("#tblModuleAutomationSettings").addClass("module-settings-loading"),$("#tblMetricSettings").addClass("module-settings-loading"),$("#serverReturnedError").addClass("hidden"),$("#moduleSettingsLoader").removeClass("hidden").show(),r.attr("data-product-id",e),WHMCS.http.jqClient.post(window.location.pathname,{action:"module-settings",module:s,servergroup:$("#inputServerGroup").val(),id:e,type:$("#selectType").val(),atype:$('input[name="atype"]:checked').val(),mode:t},function(e){var t,a,i;n=!0,$("#divModuleSettings").removeClass("module-settings-loading"),$("#tblModuleAutomationSettings").removeClass("module-settings-loading"),$("#tblMetricSettings").removeClass("module-settings-loading"),$("#divModuleSettings").html(""),r.parent("div .module-settings-mode").addClass("hidden"),s&&e.error&&($("#serverReturnedErrorText").html(e.error),$("#serverReturnedError").removeClass("hidden")),s&&e.content?($("#noModuleSelectedRow").addClass("hidden"),$("#divModuleSettings").html(e.content),$("#tblModuleAutomationSettings").find("input[type=radio]").removeAttr("disabled"),"simple"===e.mode?(r.attr("data-mode","advanced").find("span").addClass("hidden").parent().find(".text-advanced").removeClass("hidden"),r.parent("div .module-settings-mode").removeClass("hidden")):"advanced"===e.mode&&"advanced"===requestedMode?(r.attr("data-mode","simple").find("span").addClass("hidden").parent().find(".text-simple").removeClass("hidden"),r.parent("div .module-settings-mode").removeClass("hidden")):r.parent("div .module-settings-mode").addClass("hidden"),e.metrics?($("#metricsConfig").html(e.metrics).show(),$("#tblMetricSettings").removeClass("hidden").show(),$(".metric-toggle").bootstrapSwitch({size:"mini",onColor:"success"}).on("switchChange.bootstrapSwitch",function(e,t){WHMCS.http.jqClient.post($(this).data("url"),"action=toggle-metric&id="+$("#inputProductId").val()+"&module="+s+"&metric="+$(this).data("metric")+"&token="+csrfToken+"&enable="+t)})):$("#tblMetricSettings").hide(),o.length&&(t=jQuery("#associatedPackages"),i=(a=jQuery("#selectType,#inputServerGroup")).find('option[value="notAvailable"]'),void 0!==e.supportsFeatures&&(addonSupportsFeatures=e.supportsFeatures,o.find("div.radio").each(function(){$(this).removeClass("radio-disabled").find("input").prop("disabled",!1)})),addonSupportsFeatures?(t.find("option").prop("disabled",!0),"feature"===jQuery('input[name="atype"]:checked').val()&&(a.addClass("disabled").prop("disabled",!0),i.length||a.prepend($("<option>").val("notAvailable").text(e.languageStrings.notAvailableForStyle).attr("selected","selected")))):(jQuery('input[name="atype"]').first().prop("checked",!0),o.find("div.radio").each(function(){$(this).addClass("radio-disabled").find("input").prop("disabled",!0)}),t.find("option").prop("disabled",!1),a.removeClass("disabled").prop("disabled",!1),i.remove()),t.bootstrapDualListbox("refresh",!0))):($("#noModuleSelectedRow").removeClass("hidden"),$("#tblModuleAutomationSettings").find("input[type=radio]").attr("disabled",!0))},"json").always(function(){$("#moduleSettingsLoader").fadeOut(),jQuery('[data-toggle="tooltip"]').tooltip(),updateServerGroups(n?s:""),loadedModuleConfiguration=!0}),"")}function wizardCall(e,t,a){t="wizard="+$('input[name="wizard"]').val()+"&step="+$('input[name="step"]').val()+"&token="+$('input[name="token"]').val()+"&action="+e+"&"+t;WHMCS.http.jqClient.post("wizard.php",t,a)}function wizardError(e){WHMCS.ui.effects.errorShake($(".modal-wizard .wizard-step:visible .info-alert:first").html(e).removeClass("hidden").addClass("alert-danger"))}function wizardStepTransition(e,t){var a=$(".modal-wizard .wizard-step:visible").data("step-number");increment=e?2:1;var i=$(".modal-wizard .wizard-step:visible"),n=a+increment;$("#wizardStep"+n).length?($("#wizardStep"+a).fadeOut("",function(){var e="completed";t?(e="skipped",$("#wizardStepLabel"+a+" i").removeClass("fa-check-circle").addClass("fa-minus-circle")):(i.find(".signup-frm").hide(),i.find(".signup-frm-success").removeClass("hidden"),3==a?i.find(".signup-frm-success").append('<input type="hidden" id="ccGatewayFormSubmitted" name="ccGatewayFormSubmitted" value="1" />'):5==a&&i.find(".signup-frm-success").append('<input type="hidden" id="enomFormSubmitted" name="enomFormSubmitted" value="1" />')),0<n?$("#btnWizardBack").is(":visible")||$("#btnWizardBack").hide().removeClass("hidden").fadeIn("slow"):($("#btnWizardBack").fadeOut("slow"),$("#btnWizardDoNotShow").fadeIn("slow"),$("#btnWizardSkip").fadeOut("slow")),$("#wizardStepLabel"+a).removeClass("current").addClass(e),$(".modal-wizard .wizard-step:visible :input").attr("disabled",!0),$("#wizardStep"+n+" :input").removeAttr("disabled"),$("#wizardStep"+n).fadeIn(),$("#inputWizardStep").val(n),$("#wizardStepLabel"+n).addClass("current")}),$("#wizardStep"+(n+1)).length||($("#btnWizardSkip").fadeOut("slow"),$("#btnWizardBack").fadeOut("slow"),$(".modal-submit").html("Finish"))):$("#modalAjax").modal("hide")}function wizardStepBackTransition(){var e=$(".modal-wizard .wizard-step:visible").data("step-number"),t=parseInt(e)-1;$("#wizardStep"+e).fadeOut("",function(){t<1&&($("#btnWizardBack").fadeOut("slow"),$("#btnWizardDoNotShow").fadeIn("slow"),$("#btnWizardSkip").addClass("hidden")),$(".modal-wizard .wizard-step:visible :input").attr("disabled",!0),$("#wizardStep"+t+" :input").removeAttr("disabled"),$("#wizardStep"+t).fadeIn(),$("#inputWizardStep").val(t),$("#wizardStepLabel"+t).addClass("current"),$("#wizardStepLabel"+e).removeClass("current")})}function fadeoutLoaderAndAllowSubmission(e){e.find(".loader").fadeOut(),e.find(".modal-submit").removeProp("disabled")}function openSetupWizard(){$("#modalFooterLeft").html('<a href="#" id="btnWizardSkip" class="btn btn-link pull-left hidden">Skip Step</a><a href="#" id="btnWizardDoNotShow" class="btn btn-link pull-left">Do not show this again</a></div>'),$("#modalAjaxSubmit").before('<a href="#" id="btnWizardBack" class="btn btn-default hidden">Back</a>'),openModal("wizard.php?wizard=GettingStarted","","Getting Started Wizard","modal-lg","modal-wizard modal-setup-wizard","Next","","",!0)}function addInvoicePayment(){addingPayment=!0,jQuery("#modalDuplicateTransaction").modal("hide"),WHMCS.http.jqClient.post("invoices.php",jQuery("#addPayment").serialize()+"&ajax=1",function(e){e.redirectUri&&(window.location=e.redirectUri)})}function cancelAddPayment(){jQuery("#paymentLoading").fadeOut("fast",function(){jQuery("#paymentText").fadeIn("fast"),jQuery("#btnAddPayment").removeAttr("disabled")}),jQuery("#modalDuplicateTransaction").modal("hide")}function openFeatureHighlights(){openModal("whatsnew.php?modal=1","","What's new in Version ...","","modal-feature-highlights","","","",!0)}function autoSubmitFormByContainer(e){"undefined"!=typeof noAutoSubmit&&!1!==noAutoSubmit||jQuery("#"+e).find("form:first").submit()}function slugify(e){for(var t="āæåãàáäâảẩấćčçđẽèéëêếēėęīįìíïîłńñœøōõòóöôốớơśšūùúüûưÿžźż·/_,:;–",a=0,i=t.length;a<i;a++)e=e.replace(new RegExp(t.charAt(a),"g"),"aaaaaaaaaaacccdeeeeeeeeeiiiiiilnnooooooooooossuuuuuuyzzz-------".charAt(a));return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")}function generateBootstrapSwitches(){jQuery(".slide-toggle").bootstrapSwitch(),jQuery(".slide-toggle-mini").bootstrapSwitch({size:"mini"})}function submitForm(e,t){e=jQuery("#"+e);t?e.attr("target","_blank"):e.removeAttr("target"),e.submit()}function reverseCommissionConfirm(e,t){var a,i=jQuery("form#transactions"),n=i.serializeArray();if((a=n.find(function(e){return"amount"===e.name}).value)||(n=n.find(function(e){return"transid"===e.name}).value,a=jQuery('form#transactions select#transid option[value="'+n+'"]').data("amount")),t+a<e)return jQuery("#modalReverseAffiliateCommission").modal().show(),!1;jQuery("<input>",{type:"hidden",name:"reverseCommission",value:"true"}).appendTo(i),i.removeAttr("onsubmit").submit()}function reverseCommissionSubmit(e=!1){var t=jQuery("form#transactions");e&&jQuery("<input>",{type:"hidden",name:"reverseCommission",value:"true"}).appendTo(t),t.removeAttr("onsubmit").submit()}var grid,packery,ajaxModalSubmitEvents=[],ajaxModalPostSubmitEvents=[];function openModal(e,t,a,i,n,r,s,o,d,l){jQuery("#modalAjax .modal-title").html(a),i&&jQuery("#modalAjax").children('div[class="modal-dialog"]').addClass(i),n&&jQuery("#modalAjax").addClass(n),n&&jQuery("#modalAjax").addClass(n),r?(jQuery("#modalAjax .modal-submit").show().html(r),s&&jQuery("#modalAjax .modal-submit").attr("id",s)):jQuery("#modalAjax .modal-submit").hide(),d&&jQuery("#modalAjaxClose").hide(),o&&jQuery("#modalAjax .modal-submit").removeClass("btn-primary").addClass("btn-"+o),jQuery("#modalAjax .modal-body").html(""),jQuery("#modalSkip").hide(),jQuery("#modalAjax .modal-submit").prop("disabled",!0),jQuery("#modalAjax").modal("show"),WHMCS.http.jqClient.post(e,t,function(e){updateAjaxModal(e)},"json").fail(function(){jQuery("#modalAjax .modal-body").html("An error occurred while communicating with the server. Please try again."),jQuery("#modalAjax .loader").fadeOut()}).always(function(){var e=jQuery("#modalAjax").find("form");s&&e.submit(function(e){return submitIdAjaxModalClickEvent(),!1}),l&&e.data("successDataTable",l);e=jQuery(e).find("input:not(input[type=checkbox],input[type=radio],input[type=hidden])");0<e.length&&jQuery(e).first().focus()}),s&&((t=jQuery("#"+s)).off("click"),t.on("click",submitIdAjaxModalClickEvent))}function submitIdAjaxModalClickEvent(){if(!jQuery(this).hasClass("disabled")){var a=!0,e=jQuery(this);if(e.addClass("disabled"),jQuery("#modalAjax .loader").show(),ajaxModalSubmitEvents.length&&jQuery.each(ajaxModalSubmitEvents,function(e,t){t=window[t];a&&"function"==typeof t&&(a=t())}),!a)return e.removeClass("disabled"),void jQuery("#modalAjax .loader").hide();var i=jQuery("#modalAjax").find("form"),n=jQuery("#modalAjax .modal-body"),r=jQuery(n).find(".admin-modal-error");jQuery(r).slideUp();WHMCS.http.jqClient.post(i.attr("action"),i.serialize(),function(a){i.data("successDataTable")&&(a.successDataTable=i.data("successDataTable")),ajaxModalPostSubmitEvents.length&&jQuery.each(ajaxModalPostSubmitEvents,function(e,t){t=window[t];"function"==typeof t&&t(a,i)}),updateAjaxModal(a)},"json").fail(function(e){var t=e.responseJSON,e="An error occurred while communicating with the server. Please try again.";t&&t.data?(t=t.data).errorMsg?0<r.length?jQuery(r).html(t.errorMsg).slideDown():jQuery.growl.warning({title:t.errorMsgTitle,message:t.errorMsg}):t.data.body?jQuery(n).html(t.body):jQuery(n).html(e):jQuery(n).html(e),jQuery("#modalAjax .loader").fadeOut()}).always(function(){e.removeClass("disabled")})}}function updateAjaxModal(e){var t,a;e.reloadPage?"string"==typeof e.reloadPage?window.location=e.reloadPage:window.location.reload():(e.successDataTable&&WHMCS.ui.dataTable.getTableById(e.successDataTable,void 0).ajax.reload(),e.redirect&&(window.location=e.redirect),e.successWindow&&"function"==typeof window[e.successWindow]&&window[e.successWindow](),e.dismiss&&dialogClose(),e.successMsg&&jQuery.growl.notice({title:e.successMsgTitle,message:e.successMsg}),e.errorMsg&&(0<(t=jQuery("#modalAjax .modal-body .admin-modal-error")).length&&!e.dismiss?jQuery(t).html(e.errorMsg).slideDown():jQuery.growl.warning({title:e.errorMsgTitle,message:e.errorMsg})),e.title&&jQuery("#modalAjax .modal-title").html(e.title),e.body?jQuery("#modalAjax .modal-body").html(e.body):e.url&&WHMCS.http.jqClient.post(e.url,"",function(e){jQuery("#modalAjax").find(".modal-body").html(e.body)},"json").fail(function(){jQuery("#modalAjax").find(".modal-body").html("An error occurred while communicating with the server. Please try again."),jQuery("#modalAjax").find(".loader").fadeOut()}),e.submitlabel&&(jQuery("#modalAjax .modal-submit").html(e.submitlabel).show(),e.submitId&&jQuery("#modalAjax").find(".modal-submit").attr("id",e.submitId)),e.submitId&&((a=jQuery("#"+e.submitId)).off("click"),a.on("click",submitIdAjaxModalClickEvent)),(e.disableSubmit?disableSubmit:enableSubmit)(),a=!0,dismissLoaderAfterRender(a=void 0!==e.dismissLoader?e.dismissLoader:a),e.hideSubmit&&ajaxModalHideSubmit())}function dialogSubmit(){jQuery("#modalAjax .modal-submit").prop("disabled",!0),jQuery("#modalAjax .loader").show();var e=jQuery("#modalAjax").find("form").attr("action");WHMCS.http.jqClient.post(e,jQuery("#modalAjax").find("form").serialize(),function(e){updateAjaxModal(e)},"json").fail(function(){jQuery("#modalAjax .modal-body").html("An error occurred while communicating with the server. Please try again."),jQuery("#modalAjax .loader").fadeOut()})}function dialogClose(){jQuery("#modalAjax").modal("hide")}function addAjaxModalSubmitEvents(e){e&&ajaxModalSubmitEvents.push(e)}function removeAjaxModalSubmitEvents(e){!e||0<=(e=ajaxModalSubmitEvents.indexOf(e))&&ajaxModalSubmitEvents.splice(e,1)}function addAjaxModalPostSubmitEvents(e){e&&ajaxModalPostSubmitEvents.push(e)}function removeAjaxModalPostSubmitEvents(e){!e||0<=(e=ajaxModalPostSubmitEvents.indexOf(e))&&ajaxModalPostSubmitEvents.splice(e,1)}function disableSubmit(){jQuery("#modalAjax .modal-submit").prop("disabled",!0)}function enableSubmit(){jQuery("#modalAjax .modal-submit").removeProp("disabled")}function ajaxModalHideSubmit(){jQuery("#modalAjax .modal-submit").hide()}function dismissLoaderAfterRender(e){!1===e?jQuery("#modalAjax .loader").show():jQuery("#modalAjax .loader").fadeOut()}function refreshWidget(e,t){var a=$('.panel[data-widget="'+e+'"]'),i=a.find(".panel-body"),n=a.find("i.fa-sync");i.addClass("panel-loading");WHMCS.http.jqClient.post(WHMCS.adminUtils.getAdminRouteUrl("/widget/refresh&widget="+e+"&"+t),function(e){i.html(e.widgetOutput),i.removeClass("panel-loading")},"json").always(function(){n.removeClass("fa-spin")})}function loadAutomationStatsForDate(e){$("#statsContainer").css("opacity","0.5"),WHMCS.http.jqClient.post("automationstatus.php","action=stats&date="+e,function(e){$(".widgets-container").html(e.body),$(".day-selector").find(".btn-viewing").html(e.newDate)}).fail(function(){jQuery.growl({title:"",message:"Your session has expired. Please refresh to continue."})}).always(function(){$("#statsContainer").css("opacity","1")})}function refreshGraph(){$("#graphContainer").css("opacity","0.5");WHMCS.http.jqClient.post("automationstatus.php","action=graph&metric="+$(".graph-filter-metric a.active").attr("href")+"&period="+$(".graph-filter-period a.active").attr("href"),function(e){$("#graphContainer").html(e.body)}).fail(function(){jQuery.growl({title:"",message:"Your session has expired. Please refresh to continue."})}).always(function(){$("#graphContainer").css("opacity","1")})}function initDateRangePicker(){jQuery(document).ready(function(){jQuery(".date-picker-search").each(function(e){var t=jQuery(this),a=t.data("opens"),i=t.data("drops"),n=adminJsVars.dateRangePicker.defaultRanges,r=adminJsVars.dateRangeFormat;a&&void 0!==a||(a="center"),i&&void 0!==i||(i="down"),t.hasClass("future")&&(n=adminJsVars.dateRangePicker.futureRanges),t.daterangepicker({autoUpdateInput:!1,ranges:n,alwaysShowCalendars:!0,opens:a,drops:i,showDropdowns:!0,minYear:adminJsVars.minYear,maxYear:adminJsVars.maxYear,locale:{format:r,applyLabel:adminJsVars.dateRangePicker.applyLabel,cancelLabel:adminJsVars.dateRangePicker.cancelLabel,customRangeLabel:adminJsVars.dateRangePicker.customRangeLabel,monthNames:adminJsVars.dateRangePicker.months,daysOfWeek:adminJsVars.dateRangePicker.daysOfWeek}}).on("apply.daterangepicker",function(e,t){jQuery(this).val(t.startDate.format(adminJsVars.dateRangeFormat)+" - "+t.endDate.format(adminJsVars.dateRangeFormat))}).on("cancel.daterangepicker",function(e,t){jQuery(this).val("")})}),jQuery(".datepick,.date-picker,.date-picker-single").each(function(e){var t,a=jQuery(this),i=a.data("opens"),n=a.data("drops"),r=adminJsVars.dateRangePicker.defaultSingleRanges,s=adminJsVars.dateRangeFormat,o=!1;i&&void 0!==i||(i="center"),n&&void 0!==n||(n="down"),a.hasClass("future")&&(r=adminJsVars.dateRangePicker.futureSingleRanges),a.hasClass("time")&&(o=!0,s=adminJsVars.dateTimeRangeFormat,a.hasClass("future")&&(r=adminJsVars.dateRangePicker.futureTimeSingleRanges));try{if(!((t=new Date(a.data("original-value")))instanceof Date)||isNaN(t.getTime()))throw new Error("Date is Invalid");t.setDate(t.getUTCDate())}catch(e){t=new Date}a.daterangepicker({singleDatePicker:!0,autoUpdateInput:!1,ranges:r,alwaysShowCalendars:!0,opens:i,drops:n,showDropdowns:!0,minYear:adminJsVars.minYear,maxYear:adminJsVars.maxYear,timePicker:o,startDate:t,timePickerSeconds:!1,locale:{format:s,customRangeLabel:adminJsVars.dateRangePicker.customRangeLabel,monthNames:adminJsVars.dateRangePicker.months,daysOfWeek:adminJsVars.dateRangePicker.daysOfWeek}}).on("apply.daterangepicker",function(e,t){jQuery(this).data("original-value",t.startDate.format(s)).val(t.startDate.format(s))}).on("cancel.daterangepicker",function(e,t){jQuery(this).val(jQuery(this).data("original-value"))})})})}jQuery(document).ready(function(){jQuery(document).on("click",".open-modal",function(e){e.preventDefault();var t=jQuery(this).attr("href"),a=jQuery(this).data("modal-size"),i=jQuery(this).data("modal-class"),n=jQuery(this).data("modal-title"),r=jQuery(this).data("btn-submit-id"),s=jQuery(this).data("btn-submit-label"),o=jQuery(this).data("btn-submit-color"),d=jQuery(this).data("btn-close-hide"),l=jQuery(this).attr("disabled"),u=jQuery(this).data("datatable-reload-success"),e="";csrfToken&&(e={token:csrfToken}),l||openModal(t,e,n,a,i,s,r,o,d,u)}),jQuery("#modalAjax").on("hidden.bs.modal",function(e){var t;jQuery(this).hasClass("modal-feature-highlights")&&(t=jQuery("#cbFeatureHighlightsDismissForVersion").is(":checked"),WHMCS.http.jqClient.post("whatsnew.php",{dismiss:"1",until_next_update:t?"1":"0",token:csrfToken})),jQuery("#modalAjax").find(".modal-body").empty(),jQuery("#modalAjax").children("div.modal-dialog").removeClass("modal-lg"),jQuery("#modalAjax").removeClass().addClass("modal whmcs-modal fade"),jQuery("#modalAjax .modal-title").html("Title"),jQuery("#modalAjax .modal-submit").html("Submit").removeClass().addClass("btn btn-primary modal-submit").removeAttr("id").removeAttr("disabled"),jQuery("#modalAjax .loader").show()})}),jQuery(document).ready(function(){var e=jQuery(".selectize-multi-select"),t=jQuery(".selectize-select"),a=jQuery(".selectize-promo"),i=jQuery(".selectize-tags"),n=jQuery(".selectize-newTicketCc,.selectize-ticketCc"),r="";jQuery(e).selectize({plugins:["remove_button"],valueField:jQuery(e).attr("data-value-field"),labelField:"name",searchField:"name",allowEmptyOption:!0,create:!1,maxItems:null,render:{item:function(e,t){return'<div><span class="name">'+t(e.name)+"</span></div>"},option:function(e,t){return'<div><span class="name">'+t(e.name)+"</span></div>"}},onItemRemove:function(e){"multi-view"==jQuery(this)[0].$input[0].id&&"any"!=e&&"flagged"!=e&&jQuery(this)[0].removeItem("any",!0)}}),jQuery(t).selectize({valueField:jQuery(t).attr("data-value-field"),labelField:"name",searchField:"name",allowEmptyOption:jQuery(t).attr("data-allow-empty-option"),create:!1,maxItems:1,render:{item:function(e,t){var a="";return"<div"+(a=void 0!==e.colour&&"#FFF"!==e.colour?' style="background-color: '+t(e.colour)+';"':a)+'><span class="name">'+t(e.name)+"</span></div>"},option:function(e,t){var a="";return"<div"+(a=void 0!==e.colour&&"#FFF"!==e.colour?' style="background-color: '+t(e.colour)+';"':a)+'><span class="name">'+t(e.name)+"</span></div>"}},onFocus:function(){r=this.getValue(),this.clear()},onBlur:function(){""==this.getValue()&&this.setValue(r),jQuery(t).hasClass("selectize-auto-submit")&&r!==this.getValue()&&(this.setValue(this.getValue()),jQuery(t).parent("form").submit())}}),jQuery(a).selectize({valueField:jQuery(a).attr("data-value-field"),labelField:"name",searchField:"name",allowEmptyOption:jQuery(a).attr("data-allow-empty-option"),create:!1,maxItems:1,render:{item:function(e,t){var a="",i=e.name.split(" - ");return void 0!==e.colour&&"#FFF"!==e.colour&&""!==e.colour&&(a=' style="background-color: '+t(e.colour)+';"'),"undefined"!=typeof otherPromos&&e.optgroup===otherPromos&&""!==r?jQuery("#nonApplicablePromoWarning").show():jQuery("#nonApplicablePromoWarning").hide(),i[1]?"<div"+a+"><strong>"+t(i[0])+'</strong><small style="overflow: hidden"> - '+t(i[1])+"</small></div>":"<div"+a+">"+t(i[0])+"</div>"},option:function(e,t){var a="",i=e.name.split(" - ");return void 0!==e.colour&&"#FFF"!==e.colour&&""!==e.colour&&(a=' style="background-color: '+t(e.colour)+';"'),i[1]?"<div"+a+"><strong>"+t(i[0])+"</strong><br />"+t(i[1])+"</div>":"<div"+a+">"+t(i[0])+"</div>"}},onFocus:function(){this.$control.parent("div").css("overflow","visible"),r=this.getValue(),this.clear()},onBlur:function(){this.$control.parent("div").css("overflow","hidden"),""===this.getValue()&&(this.setValue(r),updatesummary()),jQuery(a).hasClass("selectize-auto-submit")&&r!==this.getValue()&&(this.setValue(this.getValue()),jQuery(a).parent("form").submit())}}),jQuery(i).selectize({plugins:["remove_button"],valueField:"text",searchField:["text"],delimiter:",",persist:!1,create:function(e){return{value:e,text:e}},render:{item:function(e,t){return'<div><span class="item">'+t(e.text)+"</span></div>"},option:function(e,t){return'<div><span class="item">'+t(e.text)+"</span></div>"}},load:function(e,t){if(!e.length)return t();jQuery.ajax({url:window.location.href,type:"POST",dataType:"json",data:{action:"gettags",q:e,token:csrfToken},error:function(){t()},success:function(e){t(e)}})},onItemAdd:function(e){jQuery.ajax({url:window.location.href,type:"POST",data:{action:"addTag",newTag:e,token:csrfToken}}).success(function(){jQuery.growl.notice({title:"",message:"Saved successfully!"})})},onItemRemove:function(e){jQuery.ajax({url:window.location.href,type:"POST",data:{action:"removeTag",removeTag:e,token:csrfToken}}).success(function(){jQuery.growl.notice({title:"",message:"Saved successfully!"})})}}),jQuery(n).selectize({plugins:["remove_button"],valueField:"text",searchField:["text"],delimiter:",",persist:!0,create:function(e){return{value:e=e.toLowerCase(),text:e,name:e,iconclass:""}},render:{item:function(e,t){return'<div class="selectize"><span class="name">'+(void 0!==e.iconclass&&0<e.iconclass.length?'<span style="padding-right: 8px"><i class="'+t(e.iconclass)+'"></i></span>'+t(e.name):t(e.name))+"</span></div>"},option:function(e,t){return'<div class="selectize"><span class="name">'+(void 0!==e.iconclass&&0<e.iconclass.length?'<span style="padding-right: 8px"><i class="'+t(e.iconclass)+'"></i></span>'+t(e.name):t(e.name))+'</span><span class="email">'+t(e.text)+"</span></div>"}}})}),$(document).ready(function(){var i=null,i=(i="undefined"!=typeof Storage?JSON.parse(localStorage.getItem("minimisedWidgets")):i)||[];$(".widget-minimise").click(function(e){e.preventDefault();var t=$(this),a=t.find("i"),e=t.closest(".panel").data("widget");a.hasClass("fa-chevron-up")?(t.closest(".panel").find(".panel-body").slideUp("fast",function(){a.removeClass("fa-chevron-up").addClass("fa-chevron-down"),packery.shiftLayout()}),-1==i.indexOf(e)&&i.push(e)):(t.closest(".panel").find(".panel-body").slideDown("fast",function(e){a.removeClass("fa-chevron-down").addClass("fa-chevron-up"),packery.fit(this),packery.shiftLayout()}),i.splice(i.indexOf(e),1)),"undefined"!=typeof Storage&&localStorage.setItem("minimisedWidgets",JSON.stringify(i))}),$(".widget-refresh").click(function(e){e.preventDefault();var t=$(this),a=t.find("i"),e=t.closest(".panel").data("widget");t.closest(".panel").find(".panel-body");a.addClass("fa-spin"),refreshWidget(e,"refresh=1")});var n=!1;if($(".widget-hide").click(function(e){e.preventDefault();var t=$(this).closest(".panel").data("widget");n=!0,$("#panel"+t).slideUp("fast",function(){$(this).addClass("hidden"),WHMCS.http.jqClient.post(WHMCS.adminUtils.getAdminRouteUrl("/widget/display/toggle/"+t)).always(function(){$('input[data-widget="'+t+'"]').iCheck("uncheck"),n=!1}),$(".home-widgets-container").masonry().masonry("reloadItems")})}),$(document).on("ifToggled",".display-widget",function(e){var t=$(this),a=$(this).data("widget"),i=$("#panel"+a);n||(t.iCheck("disable"),t.prop("checked")?i.hasClass("hidden")&&(t.parent("div").parent("label").parent("li").addClass("active"),i.hide().removeClass("hidden").slideDown("fast",function(){WHMCS.http.jqClient.post(WHMCS.adminUtils.getAdminRouteUrl("/widget/display/toggle/"+a)).always(function(){$(".home-widgets-container").masonry().masonry("reloadItems"),i.find(".widget-refresh").click(),!1===$("#widgetSettingsDropdown").hasClass("open")&&$("#widgetSettings").dropdown("toggle"),t.iCheck("enable")})})):!1===i.hasClass("hidden")&&(t.parent("div").parent("label").parent("li").removeClass("active"),i.slideUp("fast",function(){$(this).addClass("hidden"),$(".home-widgets-container").masonry().masonry("reloadItems"),WHMCS.http.jqClient.post(WHMCS.adminUtils.getAdminRouteUrl("/widget/display/toggle/"+a),function(){!1===$("#widgetSettingsDropdown").hasClass("open")&&$("#widgetSettings").dropdown("toggle")},"json").always(function(){t.iCheck("enable")})})))}),$("input.display-widget").each(function(){var e=$(this),t=e.next();t.text();t.remove(),e.iCheck({inheritID:!0,checkboxClass:"icheckbox_flat-blue",increaseArea:"20%"})}),$(".home-widgets-container").length){i.forEach(function(e){$("#panel"+e).find(".panel-body").hide().end().find("i.fa-chevron-up").removeClass("fa-chevron-up").addClass("fa-chevron-down")}),Packery.prototype.getPositions=function(){return this.items.map(function(e){return e.element.getAttribute("data-widget")})},grid=document.querySelector(".home-widgets-container"),(packery=new Packery(grid,{itemSelector:".dashboard-panel-item",columnWidth:".dashboard-panel-sizer",percentPosition:!0})).stamp(document.querySelector(".dashboard-panel-static-item"));for(var e=grid.querySelectorAll(".dashboard-panel-item"),t=0;t<e.length;t++){var a=e[t],a=new Draggabilly(a,{handle:".panel-title"});packery.bindDraggabillyEvents(a)}packery.on("removeComplete",function(){packery.shiftLayout()});var r=!1;packery.on("dragItemPositioned",function(e){packery.shiftLayout(),$(".home-widgets-container").children("div.dashboard-panel-item").hasClass("is-dragging")||r||(r=!0,setTimeout(function(){WHMCS.http.jqClient.post(WHMCS.adminUtils.getAdminRouteUrl("/widget/order"),{token:csrfToken,order:packery.getPositions()},function(e){},"json").always(function(){r=!1,packery.shiftLayout()})},1e3))})}}),$(document).ready(function(){$("#statsContainer").on("click",".btn-viewing",function(e){e.preventDefault()}),$("#graphContainer").on("click",".graph-filter-metric a",function(e){e.preventDefault(),$(".graph-filter-metric a").removeClass("active"),$(this).addClass("active"),refreshGraph()}),$("#graphContainer").on("click",".graph-filter-period a",function(e){e.preventDefault(),$(".graph-filter-period a").removeClass("active"),$(this).addClass("active"),refreshGraph()})}),jQuery(document).ready(function(){var e=jQuery(".database-backups");e.find(".activate").on("click",function(){var t=jQuery(this),a=t.parent("form"),i=t.data("type"),e=a.serialize();t.prop("disabled",!0).addClass("disabled"),e+="&action=save&activate=1&type="+i+"&token="+csrfToken,WHMCS.http.jqClient.post(window.location.href,e,function(e){!0===e.success?(jQuery.growl.notice({title:e.successMessageTitle,message:e.successMessage}),a.find(".save, .deactivate-start").removeClass("hidden"),t.addClass("hidden"),jQuery("#"+i+"Label").toggleClass("label-default label-success").text(e.activeText)):jQuery.growl.error({title:e.errorMessageTitle,message:e.errorMessage})},"json").always(function(){t.prop("disabled",!1).removeClass("disabled")})}),e.find(".save").on("click",function(){var e=jQuery(this),t=e.parent("form"),a=e.data("type"),t=t.serialize();e.prop("disabled",!0).addClass("disabled"),t+="&action=save&type="+a+"&token="+csrfToken,WHMCS.http.jqClient.post(window.location.href,t,function(e){!0===e.success?jQuery.growl.notice({title:e.successMessageTitle,message:e.successMessage}):jQuery.growl.error({title:e.errorMessageTitle,message:e.errorMessage})},"json").always(function(){e.prop("disabled",!1).removeClass("disabled")})}),e.find(".test").on("click",function(){var e=jQuery(this),t=e.parent("form"),a=e.data("type"),i=t.serialize();e.prop("disabled",!0).addClass("disabled"),jQuery("#"+a+"Container").removeClass("hidden"),i+="&action=test&type="+a+"&token="+csrfToken,jQuery("#"+a+"Test").hide().removeClass("hidden alert-success alert-danger").addClass("alert-default").find(".extra-text").addClass("hidden").text("").end().find(".default-text").removeClass("hidden").end().slideDown("fast"),WHMCS.http.jqClient.post(window.location.href,i,function(e){!0===e.success?(jQuery("#"+a+"Test").addClass("alert-success").removeClass("alert-default alert-danger").find(".default-text").addClass("hidden").end().find(".extra-text").text(e.successMessage).removeClass("hidden").end().delay(3e3).slideUp("slow"),t.find(".activate").prop("disabled",!1).removeClass("disabled")):jQuery("#"+a+"Test").addClass("alert-danger").removeClass("alert-default alert-success").find(".default-text").addClass("hidden").end().find(".extra-text").text(e.errorMessageTitle+": "+e.errorMessage).removeClass("hidden").end().delay(3e3).slideUp("slow")},"json").always(function(){e.prop("disabled",!1).removeClass("disabled"),jQuery("#"+a+"Container").addClass("hidden")})}),e.find(".deactivate-start").on("click",function(){var e=jQuery(this),t=(e.parent("form"),e.data("type")),e=jQuery("#modalConfirmDeactivate");jQuery("#confirmDeactivateYes").data("type",t),e.modal("show")}),jQuery("#modalConfirmDeactivate").find(".deactivate").on("click",function(){var e=jQuery(this),t=jQuery("#modalConfirmDeactivate"),a=(t.parent("form"),e.data("type")),i="action=deactivate&type="+a+"&token="+csrfToken,n=jQuery('.deactivate-start[data-type="'+a+'"]').parent("form");e.prop("disabled",!0).addClass("disabled"),WHMCS.http.jqClient.post(window.location.href,i,function(e){!0===e.success?(jQuery.growl.notice({title:e.successMessageTitle,message:e.successMessage}),n.find(".save, .deactivate-start").addClass("hidden"),n.find(".activate").removeClass("hidden").prop("disabled",!0),"email"===a&&n.find(".activate").prop("disabled",!1),jQuery("#"+a+"Label").toggleClass("label-default label-success").text(e.inactiveText)):jQuery.growl.error({title:e.errorMessageTitle,message:e.errorMessage})},"json").always(function(){e.prop("disabled",!1).removeClass("disabled"),t.modal("hide")})}),e.find("#inputDestination").on("change",function(){var e=jQuery("#destinationData"),t=jQuery(this).val();"homedir"!==t&&e.hasClass("hidden")?e.hide().removeClass("hidden").slideDown("fast"):"homedir"!==t||e.hasClass("hidden")||e.slideUp("fast").addClass("hidden")})}),initDateRangePicker(),jQuery(document).ready(function(){var n,r,s,t=jQuery("button.retry-all");function a(){if(n){var e=jQuery("button.retry:eq("+s+")");if(!e.length)return clearTimeout(r),r=null,void t.removeAttr("disabled").removeClass("disabled").find("i").removeClass("fa-spin").end();e.click()}r=setTimeout(a,1e3)}t.length&&(n=!1,r=null,s=0,jQuery("button.retry").click(function(){n=!1;var t=jQuery(this),a=jQuery(this).data("entry-id"),i=jQuery("div#processing-entry-"+a);t.attr("disabled","disabled").addClass("disabled").find("i").addClass("fa-spin").end(),r?i.find("div.queued").hide().end().find("div.processing").show().end():i.find("div.messages").children("div").hide().end().find("div.processing").show().end().end().hide().removeClass("hidden").slideDown("fast");var e=WHMCS.http.jqClient.post(window.location.pathname,{token:csrfToken,action:"retry",id:a},null,"json");e.done(function(e){e.error&&(i.find("div.processing").hide().end().find("div.error").find("span").html(e.message).parent().show().end(),jQuery("#last-error-"+a).html(e.errorMessage),jQuery("div#entry-"+a).find("small.last-attempt").find("span").html(e.lastAttempt),t.removeAttr("disabled").removeClass("disabled").find("i").removeClass("fa-spin").end(),s++),e.completed&&(jQuery("div#entry-"+a).find("div.action-buttons").find("button").removeClass("retry").attr("disabled","disabled").addClass("disabled").find("i.fa-spin").removeClass("fa-spin").end(),i.find("div.processing").slideUp("fast").end().find("div.success").slideDown("fast").end())}),e.always(function(){n=!0})}),jQuery("button.resolve").click(function(){var t=jQuery(this),a=jQuery(this).data("entry-id"),i=jQuery("div#processing-entry-"+a);t.attr("disabled","disabled").addClass("disabled"),i.find("div.messages").children("div").hide().end().find("div.processing").show().end().end().hide().removeClass("hidden").slideDown("fast"),WHMCS.http.jqClient.post(window.location.pathname,{token:csrfToken,action:"resolve",id:a},null,"json").done(function(e){e.completed?(jQuery("div#entry-"+a).find("div.action-buttons").find("button").removeClass("retry").attr("disabled","disabled").addClass("disabled").end(),i.find("div.processing").slideUp("fast").end().find("div.success").find("span").html(e.message).parent().slideDown("fast").end()):(i.find("div.processing").slideUp("fast").end().find("div.error").find("span").html(e.message).parent().slideDown("fast").end(),t.removeAttr("disabled").removeClass("disabled"))})}),t.click(function(){jQuery(this).attr("disabled","disabled").addClass("disabled").find("i").addClass("fa-spin").end();var e=jQuery("button.retry");n=!0,s=0,e.each(function(e){var t=jQuery(this).data("entry-id");jQuery("div#processing-entry-"+t).find("div.messages").children("div").hide().end().find("div.queued").show().end().end().hide().removeClass("hidden").slideDown("fast")}),r=setTimeout(a,1e3)}))}),jQuery(document).ready(function(){jQuery(document).on("click","#btnMcServiceRefresh",function(e){e.preventDefault();var t=$(this);t.find("i").addClass("fa-spin"),WHMCS.http.jqClient.post({url:"clientsservices.php",data:t.attr("href")+"&token="+csrfToken,success:function(e){$("#mcServiceManagementWrapper").replaceWith(e.statusOutput),t.find("i").removeClass("fa-spin")}})}),jQuery(document).on("click","#btnMcCancelOrder",function(e){swal({title:"Are you sure?",html:!0,text:'Cancelling this order will result in the service immediately ceasing to function.<br><br>You will automatically receive a credit if within the credit period. <a href="https://go.whmcs.com/1281/marketconnect-credit-terms" target="_blank">See credit period terms</a>',type:"warning",showCancelButton:!0,confirmButtonText:"Yes, cancel it",cancelButtonText:"No"},function(){runModuleCommand("terminate")})}),jQuery(document).on("click","#mcServiceManagementWrapper .btn:not(.open-modal,.btn-refresh,.btn-cancel)",function(e){e.preventDefault(),$("#growls").fadeOut("fast").remove(),$(".successbox,.errorbox").slideUp("fast").remove();var t=$(this),e=t.attr("href"),a=t.find("i"),i=a.attr("class");"disabled"!==t.attr("disabled")&&(a.removeClass().addClass("fas fa-spin fa-spinner"),WHMCS.http.jqClient.post("clientsservices.php",e+"&token="+csrfToken,function(e){e.redirectUrl?window.open(e.redirectUrl):e.growl?"error"==e.growl.type?$.growl.error({title:"",message:e.growl.message}):($.growl.notice({title:"",message:e.growl.message}),$("#btnMcServiceRefresh").click()):($.growl.error({title:"",message:"Unknown response"}),console.error("[WHMCS] Unknown response: "+JSON.stringify(e)))},"json").fail(function(e){e=""!=e.responseText?e.responseText:e.statusText;$.growl.error({title:"",message:e})}).always(function(e){a.removeClass().addClass(i)}))})}),jQuery(document).ready(function(){if("undefined"!=typeof customCountryData){var e,t=$.fn.intlTelInput.getCountryData();for(e in customCountryData)if(customCountryData.hasOwnProperty(e)){var a=customCountryData[e];if(codeLower=e.toLowerCase(),!1===a){for(var i=0;i<t.length;i++)if(codeLower===t[i].iso2){t.splice(i,1);break}}else t.push({name:a.name,iso2:codeLower,dialCode:a.callingCode,priority:0,areaCodes:null})}}var n,r,s,o;jQuery("body").data("phone-cc-input")&&((n=jQuery('input[name^="phone"], input[name$="phone"], input[name="domaincontactphonenumber"]').not('input[type="hidden"]')).length&&(r=jQuery('[name^="country"], [name$="country"]'),s="us",r.length&&"um"===(s=r.val().toLowerCase())&&(s="us"),n.each(function(){var t=jQuery(this),a=t.attr("name");"domaincontactphonenumber"===a&&(s=jQuery('[name="domaincontactcountry"]').val().toLowerCase()),jQuery(this).before('<input id="populatedCountryCode'+a+'" type="hidden" name="country-calling-code-'+a+'" value="" />'),t.intlTelInput({preferredCountries:[s,"us","gb"].filter(function(e,t,a){return a.indexOf(e)===t}),initialCountry:s,autoPlaceholder:"polite",separateDialCode:!0}),t.on("countrychange",function(e,t){jQuery("#populatedCountryCode"+a).val(t.dialCode),jQuery(this).val()==="+"+t.dialCode&&jQuery(this).val("")}),t.on("blur keydown",function(e){var t;("blur"===e.type||"keydown"===e.type&&13===e.keyCode)&&(t=jQuery(this).intlTelInput("getNumber"),e="+"+jQuery(this).intlTelInput("getSelectedCountryData").dialCode,0===t.indexOf(e)&&1<(t.match(/\+/g)||[]).length&&(t=t.substr(e.length)),jQuery(this).intlTelInput("setNumber",t))}),jQuery("#populatedCountryCode"+a).val(t.intlTelInput("getSelectedCountryData").dialCode),r.on("change",function(){var e;""===t.val()&&(e=jQuery(this).val().toLowerCase(),n.intlTelInput("setCountry",e="um"===e?"us":e))}),t.attr("data-initial-value",$(t).val()),t.parents("form").find("input[type=reset]").each(function(){var t=$(this).parents("form");$(this).data("phone-handler")||($(this).data("phone-handler",!0),$(this).click(function(e){return e.stopPropagation(),$(t).trigger("reset"),$(t).find("input[data-initial-value]").each(function(){$(this).val($(this).attr("data-initial-value"))}),!1}))})}),n.parents("div.form-group").find(".field-icon").hide().end(),n.removeClass("field").addClass("form-control")),(o=jQuery('input[name$="][Phone Number]"], input[name$="][Phone]"]').not('input[type="hidden"]')).length&&jQuery.each(o,function(e,t){var a=jQuery(this),i=(i=a.attr("name")).replace("contactdetails[","").replace("][Phone Number]","").replace("][Phone]",""),n=jQuery('[name$="'+i+'][Country]"]'),r=n.val().toLowerCase();"um"===r&&(r="us"),a.before('<input id="populated'+i+'CountryCode" type="hidden" name="contactdetails['+i+'][Phone Country Code]" value="" />'),a.intlTelInput({preferredCountries:[r,"us","gb"].filter(function(e,t,a){return a.indexOf(e)===t}),initialCountry:r,autoPlaceholder:"polite",separateDialCode:!0}),a.on("countrychange",function(e,t){jQuery("#populated"+i+"CountryCode").val(t.dialCode),jQuery(this).val()==="+"+t.dialCode&&jQuery(this).val("")}),a.on("blur keydown",function(e){var t;("blur"===e.type||"keydown"===e.type&&13===e.keyCode)&&(t=jQuery(this).intlTelInput("getNumber"),e="+"+jQuery(this).intlTelInput("getSelectedCountryData").dialCode,0===t.indexOf(e)&&1<(t.match(/\+/g)||[]).length&&(t=t.substr(e.length)),jQuery(this).intlTelInput("setNumber",t))}),jQuery("#populated"+i+"CountryCode").val(a.intlTelInput("getSelectedCountryData").dialCode),n.on("blur",function(){var e;""===a.val()&&(e=jQuery(this).val().toLowerCase(),a.intlTelInput("setCountry",e="um"===e?"us":e))})}))});